<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Admin Link Gestori - CoWorkSpace</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card">
                    <div class="card-header">
                        <h3 class="mb-0">Test Admin Link Gestori - Link Dashboard Amministratore</h3>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <h5>ğŸ” Test Obiettivo:</h5>
                            <p>Verificare che il link "Dashboard Utente" si trasformi in "Dashboard Amministratore" nella dashboard gestori quando l'utente Ã¨ un amministratore.</p>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h5>ğŸ”— Test Pagina:</h5>
                                <div class="d-grid gap-2">
                                    <a href="dashboard-responsabili.html" class="btn btn-outline-info" target="_blank">
                                        <i class="fas fa-users-cog me-2"></i>Dashboard Gestori
                                    </a>
                                </div>
                                
                                <hr>
                                
                                <h5>ğŸ”§ Debug Console:</h5>
                                <div class="alert alert-secondary">
                                    <small>
                                        <strong>Apri la console del browser</strong> (F12) per vedere i log di debug:<br>
                                        - "ğŸ” setupNavbarLinks chiamata..."<br>
                                        - "ğŸ” User dal localStorage: presente"<br>
                                        - "ğŸ” Ruolo utente: amministratore"<br>
                                        - "ğŸ” AdminLink trovato: sÃ¬"<br>
                                        - "âœ… Link amministratore mostrato per amministratore"
                                    </small>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h5>ğŸ“‹ Checklist Verifica:</h5>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="check1">
                                    <label class="form-check-label" for="check1">
                                        Login come amministratore
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="check2">
                                    <label class="form-check-label" for="check2">
                                        Vai alla Dashboard Gestori
                                    </label>
                                </div>
                                                                 <div class="form-check">
                                     <input class="form-check-input" type="checkbox" id="check3">
                                     <label class="form-check-label" for="check3">
                                         Navbar: Il link "Dashboard Utente" diventa "Dashboard Amministratore"
                                     </label>
                                 </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="check4">
                                    <label class="form-check-label" for="check4">
                                        Console: Vedi i log di debug
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="check5">
                                    <label class="form-check-label" for="check5">
                                        Link: Funziona e porta alla Dashboard Amministratore
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <hr>
                        
                                                 <div class="alert alert-success">
                             <h5>âœ… Risultato Atteso:</h5>
                             <p><strong>Nella dashboard gestori</strong>, il link "Dashboard Utente" si trasforma in "Dashboard Amministratore" per gli amministratori.</p>
                             <p><strong>Il link</strong> deve essere visibile e funzionante, portando alla dashboard amministratore.</p>
                             <p><strong>I log di debug</strong> devono confermare che la funzione <code>setupNavbarLinks</code> viene eseguita correttamente.</p>
                         </div>

                                                 <div class="alert alert-warning">
                             <h5>âš ï¸ Se il Link Non Appare:</h5>
                             <ul>
                                 <li>Controlla la console per errori JavaScript</li>
                                 <li>Verifica che l'utente sia effettivamente un amministratore</li>
                                 <li>Controlla che il link "Dashboard Utente" esista nell'HTML</li>
                                 <li>Verifica che la funzione <code>setupNavbarLinks</code> venga chiamata</li>
                             </ul>
                         </div>

                                                 <div class="alert alert-info">
                             <h5>ğŸ”§ Codice Rilevante:</h5>
                             <ul>
                                 <li><strong>HTML:</strong> <code>&lt;a class="nav-link" href="dashboard.html"&gt;Dashboard Utente&lt;/a&gt;</code></li>
                                 <li><strong>JavaScript:</strong> <code>setupNavbarLinks()</code> in <code>dashboard-responsabili.js</code></li>
                                 <li><strong>Logica:</strong> Trasforma il link se <code>userData.ruolo === 'amministratore'</code></li>
                             </ul>
                         </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Simula dati di test per amministratore
        const testUser = {
            id_utente: 1,
            nome: 'Admin',
            cognome: 'Test',
            email: 'admin@test.com',
            ruolo: 'amministratore',
            token: 'test-token'
        };
        
        // Salva dati di test nel localStorage
        localStorage.setItem('user', JSON.stringify(testUser));
        localStorage.setItem('token', 'test-token');
        
                 console.log('âœ… Dati di test caricati per amministratore');
         console.log('ğŸ” Ora vai alla Dashboard Gestori per testare il link');
         console.log('ğŸ¯ Il link "Dashboard Utente" dovrebbe trasformarsi in "Dashboard Amministratore"');
        
                 // Test della funzione setupNavbarLinks
         function testSetupNavbarLinks() {
             console.log('ğŸ§ª Test manuale setupNavbarLinks...');
             const user = localStorage.getItem('user');
             console.log('ğŸ§ª User dal localStorage:', user ? 'presente' : 'non presente');
             
             if (user) {
                 try {
                     const userData = JSON.parse(user);
                     console.log('ğŸ§ª UserData:', userData);
                     console.log('ğŸ§ª Ruolo utente:', userData.ruolo);
                     
                     const dashboardUtenteLink = document.querySelector('a[href="dashboard.html"]');
                     console.log('ğŸ§ª Dashboard Utente Link trovato:', dashboardUtenteLink ? 'sÃ¬' : 'no');
                     
                     if (userData.ruolo === 'amministratore' && dashboardUtenteLink) {
                         console.log('âœ… Test: Link Dashboard Utente dovrebbe trasformarsi in Dashboard Amministratore');
                     } else {
                         console.log('âŒ Test: Problema rilevato');
                     }
                 } catch (error) {
                     console.error('âŒ Test: Errore parsing user:', error);
                 }
             }
         }
        
        // Esegui test dopo 1 secondo
        setTimeout(testSetupNavbarLinks, 1000);
    </script>
</body>
</html>
